<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Chiro Lourdes - Crowdfunding</title>
  <script src="./js/transactions.js" type="module"></script>
  <link rel="stylesheet" type="text/css" href="css/style.css">
  <link rel="shortcut icon" type="image/png" href="images/favicon.png">  
  <link href="https://fonts.googleapis.com/css?family=Montserrat:300,400,600|Oswald:600,700" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
</head>
<body>
  <div id="cssportal-grid">
    <div id="col1"></div>
    <div id="col2">      
      <!-- <div class="a2a_kit a2a_kit_size_24 a2a_default_style" data-a2a-url="https://crowdfunding.chirolourdes.be" data-a2a-title="Chiro Lourdes Crowdfunding">
        <a class="a2a_dd" href="https://www.addtoany.com/share"></a>
        <a class="a2a_button_facebook"></a>
        <a class="a2a_button_email"></a>
        <a class="a2a_button_sms"></a>
        <a class="a2a_button_whatsapp"></a>
        <a class="a2a_button_facebook_messenger"></a>
        <a class="a2a_button_x"></a>
      </div>
      <script>
        // add2anything scripting
        var a2a_config = a2a_config || {};
        a2a_config.templates = a2a_config.templates || {};     
        a2a_config.templates.email = {
            subject: "Ik heb net het Chiro Lourdes Bouwproject gesteund, nu jij nog: ${title}",
            body: "Hier is de link:\n${link}",
        };
        a2a_config.templates.facebook = {
            app_id: "5303202981",
            redirect_uri: "https://static.addtoany.com/menu/thanks.html",
        };
        a2a_config.templates.sms = {
            body: "Ik heb net het Chiro Lourdes Bouwproject gesteund, nu jij nog: ${title} ${link}",
        };
        a2a_config.templates.whatsapp = {
            text: "Ik heb net het Chiro Lourdes Bouwproject gesteund, nu jij nog: ${link}",
        };
        a2a_config.templates.x = {
            text: "Ik heb net het Chiro Lourdes Bouwproject gesteund, nu jij nog: ${title} ${link}",
        };
      </script>
      <script async src="https://static.addtoany.com/menu/page.js"></script>       -->
      <div id="crowd-grid">
        <div id="crowd-col1">
          <h1>Chiro Lourdes</h1>
          <table id="doe-een-gift-table">
            <tbody>
              <tr>
                <td>
                  <img src="images/chiro-lourdes-bouwt-logo.png" id="doe-een-gift-image"/>
                </td>
                <td>
                  <h2>ONS CHIRO LOKAAL IS UITGESPEELD, MAAR WIJ NOG LANG NIET!</h2>
                </td>
              </tr>
            </tbody>
          </table>  

          <p>Daarom vragen wij jouw hulp. Omdat we nieuwe lokalen nodig hebben. Om elk kind veilig te laten spelen, te laten groeien en om vrienden voor het leven te maken.                
          </p>
          <div class="gift-options">
            <!-- <h3>DOE EEN GIFT</h3>  -->
            <div class="forward-button-container">
              <a href="https://draftchirojeugdvlaanderen.koalect.com/nl-NL/p/chiro-lourdes-meisjes-bouwt" target="_blank" class="forward-button"><i class="fa-solid fa-hand-holding-heart"></i> DOE EEN GIFT</a>
            </div>
            <p>Help ons starten met de bouw. Elke gift is waardevol. Bedankt.</p>
            <table id="doe-een-gift-table">
              <tbody>
                <tr>
                  <td>
                    <div class="circle-label">
                      <label>€60</label>
                    </div>
                  </td>
                  <td>
                    en je schenkt een bouwsteen (€33 na belastingaftrek)
                      <!-- <li>Geef <strong>€100</strong> dan krijgt je naam een plekje in het nieuw gebouw (€100 na belastingaftrek)</li>
                      <li>Geef <strong>€250</strong> en krijg een Ria-cake aan huis geleverd (€137,5 na belastingaftrek) </li>
                    </ul> -->
                  </td>
                </tr>
                <tr>
                  <td>
                    <div class="circle-label">
                      <label>€100</label>
                    </div>
                  </td>
                  <td>
                    dan krijgt je naam een plekje in het nieuw gebouw (€55 na belastingaftrek)
                  </td>
                </tr>     
                <tr>
                  <td>
                    <div class="circle-label">
                      <label>€250</label>
                    </div>
                  </td>
                  <td>
                    en krijg een Ria-cake aan huis geleverd (€137,5 na belastingaftrek)
                  </td>
                </tr>                             
              </tbody>
            </table>  
            <p>
              Je gift betekent heel erg veel voor onze Chiro. Bedankt. Je kan ons verhaal ook altijd delen en verder vertellen.
              <blockquote>
                Een gift vanaf €40 geeft je trouwens recht op een fiscaal voordeel. Je krijgt 45% van je gift terug door middel van een belastingsvermindering. Je zal hiervoor automatisch een fiscaal attest ontvangen.
              </blockquote>
              <div class="a2a_kit a2a_kit_size_24 a2a_default_style" data-a2a-url="https://crowdfunding.chirolourdes.be" data-a2a-title="Chiro Lourdes Crowdfunding">
                <a class="a2a_dd" href="https://www.addtoany.com/share"></a>
                <a class="a2a_button_facebook"></a>
                <a class="a2a_button_email"></a>
                <a class="a2a_button_sms"></a>
                <a class="a2a_button_whatsapp"></a>
                <a class="a2a_button_facebook_messenger"></a>
                <a class="a2a_button_x"></a>
              </div>
              <script>
                // add2anything scripting
                var a2a_config = a2a_config || {};
                a2a_config.templates = a2a_config.templates || {};     
                a2a_config.templates.email = {
                    subject: "Ik heb net het Chiro Lourdes Bouwproject gesteund, nu jij nog: ${title}",
                    body: "Hier is de link:\n${link}",
                };
                a2a_config.templates.facebook = {
                    app_id: "5303202981",
                    redirect_uri: "https://static.addtoany.com/menu/thanks.html",
                };
                a2a_config.templates.sms = {
                    body: "Ik heb net het Chiro Lourdes Bouwproject gesteund, nu jij nog: ${title} ${link}",
                };
                a2a_config.templates.whatsapp = {
                    text: "Ik heb net het Chiro Lourdes Bouwproject gesteund, nu jij nog: ${link}",
                };
                a2a_config.templates.x = {
                    text: "Ik heb net het Chiro Lourdes Bouwproject gesteund, nu jij nog: ${title} ${link}",
                };
              </script>
              <script async src="https://static.addtoany.com/menu/page.js"></script>              
            </p> 

          </div>  
                  
        </div>
        <div id="crowd-col2">
          <h2>Doe mee met de crowdfunding</h2>
          <div class="steun-girl-image-container">
            <img class="steun-girl-image" src="images/steun-girl-pointing.png"/>
            <div class="steun-girl-image-overlay">&nbsp;0%</div>
          </div>
          <table id="steun-girl-table">
            <tbody>
              <!-- Data will be inserted here -->
            </tbody>
          </table>  
          <div class="progress-bar">
            <div class="progress"></div>
            <div class="progress-text"></div>            
          </div>
          <br>
          <div class="forward-button-container">
            <a href="https://draftchirojeugdvlaanderen.koalect.com/nl-NL/p/chiro-lourdes-meisjes-bouwt" target="_blank" class="forward-button"><i class="fa-solid fa-hand-holding-heart"></i> Doneer Nu</a>
          </div>
        </div>
      </div>
      <div id="crowd-grid">
        <div id="crowd-col1">
          <img src="images/steun-girl-running.png" id="steun-girl-running-image"/>
          <p><strong>Dit is Chiro Lourdes:</strong> één grote familie voor ‘t leven. Een familie waar je leert samenwerken, verantwoordelijkheid nemen, jezelf leert kennen. Een plek waar je voluit jezelf kan zijn, elke zondag opnieuw. Voor élk kind.
          </p> 
          <p>
            <strong>En dat kan niet meer zonder een nieuw gebouw.</strong> We groeien jaar na jaar. 
            Van 70 leden in het begin tot over de 200 nu. Onze pinkels, speelclubs, kwiks, tippers, tip-10’s en aspi’s verdienen hun plekje. Help jij ze mee? Doe nu je gift en draag letterlijk je steentje bij.
          </p>
          <p>
            <strong>Een gift vanaf 40 euro geeft je trouwens recht op een fiscaal voordeel.</strong> Je krijgt 45% van je gift terug met een belastingvermindering. Je krijgt hiervoor automatisch een fiscaal attest. Bij een gift van 60 euro krijg je dus 27 euro terug. Bij een gift van 100 euro is dat zelfs 45 euro.
            <blockquote>
              “Zonder Chiro Lourdes was ik nooit de persoon geworden die ik vandaag ben. Ik kan nooit teruggeven wat Chiro mij gaf, maar ik wil er wel alles aan doen om dit project te doen slagen voor elk kind dat nog van deze fantastische groep kan genieten”, zegt Gerda, gestart bij de Speelclub in 1967. 
            </blockquote>
          </p>
          <p>
            <strong>Om onze nieuwe lokalen te bouwen hebben we giften nodig.</strong> Véél giften. Want als we 50.000 euro inzamelen, doet Stad Gent dat bedrag maal drie in subsidies. Hoe meer we inzamelen, hoe meer subsidies dus. Dan kunnen we beginnen bouwen. Onze droom: de plek die Ria creëerde vereeuwigen. 
          </p>
          <p>
            <strong>Ria startte Chiro Lourdes 65 jaar geleden!</strong>
            <blockquote>
              Hoofdleidsters Lies en Sarah: Vandaag is ze nog altijd een tweede grootmoeder voor elk van ons, ze kent ook elk van de 200 leden bij naam, doe haar dat maar eens na. Niemand die je zo welkom kan doen voelen”
            </blockquote>
            <blockquote>
              Ria is in mei dit jaar 80 jaar. Ze zegt altijd ‘als ik de Lotto win, geef ik jullie lokalen’, Hoe schoon zou het zijn als wij haar dat kunnen geven?
            </blockquote>
          </p>
        </div>
        <div id="crowd-col2">
          <h2>Donaties overzicht</h2>
          <table id="total-data-table">
            <thead>
              <tr>
                <th>Wie</th>
                <th>Bedrag</th>
                <th>Donaties</th>
              </tr>
            </thead>
            <tbody>
              <!-- Data will be inserted here -->
            </tbody>
          </table> 
          <br> 
          <h2>Deze mensen gaven al iets</h2>
          <table id="data-table">
            <thead>
              <tr>
                <th>Wie</th>
                <th>Bedrag</th>
                <th>Datum</th>
              </tr>
            </thead>
            <tbody>
              <!-- Data will be inserted here -->
            </tbody>
          </table>  
        </div>
      </div>

    </div>
    <div id="col3"></div>
  </div>
  <script type="module">
    import { fetchAllData, totalAmountCollected } from './js/transactions.js';

    const totalCrowdfundingGoal = 50000;
    const allData = await fetchAllData();
    // console.log(allData);

    // display all donations
    const tableBody = document.querySelector('#data-table tbody');
    allData.merged.forEach(donatie => {
      const row = tableBody.insertRow();
      if (donatie[3] === "P") {
        row.insertCell(0).innerHTML = '<i class="fa-solid fa-person"></i> ' + donatie[0];
      } else {
        row.insertCell(0).innerHTML = '<i class="fa-solid fa-industry"></i> ' + donatie[0];
      }
      row.insertCell(1).innerHTML = '<i class="fa-solid fa-euro-sign"></i>' + donatie[1];
      row.insertCell(2).textContent = donatie[2];
    }); 
    
    const [ totalBedrijven, totalAmountBedrijven ]  = totalAmountCollected(allData.bedrijven);
    const totalPersonen = allData.crowdfunding.contributionsCount;
    const totalAmountPersonen = allData.crowdfunding.currentAmount;
    const totalProgress = Math.round((totalAmountBedrijven + totalAmountPersonen) / totalCrowdfundingGoal * 100);

    // visualise 
    const steunGirlTableBody = document.querySelector('#steun-girl-table tbody');
    const steunRow1 = steunGirlTableBody.insertRow();
    steunRow1.insertCell(0).innerHTML = "€" + (totalAmountBedrijven + totalAmountPersonen);
    steunRow1.insertCell(1).innerHTML = totalPersonen + totalBedrijven;
    steunRow1.insertCell(2).innerHTML = totalProgress + "%";
    steunRow1.id = "steun-girl-table-row1";
    const steunRow2 = steunGirlTableBody.insertRow();
    steunRow2.insertCell(0).innerHTML = "ingezameld van de €50000";
    steunRow2.insertCell(1).innerHTML = "donateurs";
    steunRow2.insertCell(2).innerHTML = "al opgehaald";
    steunRow2.id = "steun-girl-table-row2";

    const totalTableBody = document.querySelector('#total-data-table tbody');
    const row1 = totalTableBody.insertRow();
    row1.insertCell(0).innerHTML = '<i class="fa-solid fa-person"></i> Personen';
    row1.insertCell(1).innerHTML = '<i class="fa-solid fa-euro-sign"></i>' + totalAmountPersonen;
    row1.insertCell(2).textContent = totalPersonen;
    const row2 = totalTableBody.insertRow();
    row2.insertCell(0).innerHTML = '<i class="fa-solid fa-industry"></i> Bedrijven';
    row2.insertCell(1).innerHTML = '<i class="fa-solid fa-euro-sign"></i>' + totalAmountBedrijven;
    row2.insertCell(2).textContent = totalBedrijven;

    // progress
    const progress = document.querySelector('.progress');
    const progressText = document.querySelector('.progress-text');
    const imageOverlay = document.querySelector('.steun-girl-image-overlay');
    progress.style.width = totalProgress + '%';
    progressText.innerHTML = '<i class="fa-solid fa-euro-sign"></i>' + (50000 - totalAmountBedrijven - totalAmountPersonen)  + " to go!"
    imageOverlay.innerHTML = totalProgress + '%';

    

  </script>

</body>
</html>
